---
title: 对于IP的理解
tags:
  - IP
categories:
  - 计算机网络
date: 2019-08-06 09:48:49
photo:
---

{% note default %}
IP是网络层的东西，实际上涉及到的内容很多，有很多知识点看了又忘，在此做一个总结。
{% endnote %}

<!-- more -->

## 最初的IP分类
在我们在Linux系统中输入ifconfig或者是ip addr，会输出有关ip的相关东西，实际上我们发现，都是一些关于网卡的东西，简单来讲，就是一些关于网卡的状态，网卡的硬件地址，还有一个网卡的ip地址。

**这个网卡的ip地址就是这个网卡在网络世界的通讯地址，相当于是现实世界的门牌号**。

ip地址32位，4个8位。
最初划分成5类。
<img src="http://rensongwang.gitee.io/my_drawing_bed/IP地址分类.JPG">
<img src="http://rensongwang.gitee.io/my_drawing_bed/ABC类IP地址范围.JPG">

大体上不变的是网络号+主机号，可以看到B类地址的主机号范围可以达到65534，而C类可用的就只有254，又太少了。

## CIDR
所以，后面为了充分利用所剩不少的ip地址，出现了CIDR无类型域间选路。
不再分什么ABC类了，就是网络前缀+主机号，这个网络前缀呢，就表示你是哪里人一样，所以在ip地址后面会有下划线就像/24一样，表示有24位网络前缀。
子网掩码呢就是24位都是1，主机号对应的都是0。

## 私有IP
上面的表格中，有说明ABC类分别的私有IP地址范围。
也就是说，在网络中分配公有IP的时候，并不把这些IP地址分配，而是作为组织或个人自己分配，于是可以重复。
但是你要“出国”，就要完成私有到公有IP地址的映射。
目前我也不是很清楚私有IP的运作方式。

##为什么MAC地址是全局唯一，还要用IP地址呢？
网卡都有一个硬件地址，这个是全局唯一的，也就是说，这个网卡被制造出来上网，被打在了网卡上。
那么既然这个网卡是唯一的，我们为什么还需要用IP地址来寻址呢？
**MAC地址更像是一个身份证，唯一的标识，而IP地址是门牌号，相当于通讯地址。**
这就很好理解了。
**IP地址具有定位功能，而MAC地址没有**。
实际上，MAC地址是在数据链路层中的局域网协议中确定身份的唯一。
在为机器分配IP地址的时候，要确定机器是唯一的，不能发生冲突。
在网络层用的是IP地址，但是在实际网络的链路上用的是MAC地址。因此需要一个IP到MAC的映射，这个工作有ARP协议来做。
每一台主机上都设有ARP高速缓存，里面是一些本局域网上的各主机和路由器的IP地址到硬件地址的映射表。
主机A向主机B发送数据，会先在ARP高速缓存中找B的MAC地址，有就根据B的MAC地址包装成MAC帧发送数据即可。
如果没有，可能是B才入网。
这个时候，会运行ARP协议，来找到B的MAC地址：
- ARP进程在本局域网上广播发送一个ARP请求分组。内容就是我是谁，我的硬件地址，我想知道IP为某的硬件地址。
- 所有主机都能收到。
- 只有IP需求一致的主机才会处理请求，然后单播发送响应分组。内容就是我是IP某，硬件地址是某。
**广播地址其实就是主机号全为1，这与规定有关，相关的规定还有很多。**

## 总结
- IP具有定位功能，而MAC就是身份标识。
- CIDR可以判断是不是本地人














--- 

